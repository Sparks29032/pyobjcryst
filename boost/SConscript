Import("env")

# Get rid of the lib prefix
env["SHLIBPREFIX"]=""

# Append objcryst libraries and required boost library
env.Append(LIBS = ["cryst", "RefinableObj", "CrystVector", "Quirks", "cctbx",
        "newmat", "boost_python"]
        )

# Get the modules
modfiles = Glob("*_ext.cpp")

for fileobj in modfiles:
    filename = str(fileobj)
    libname = "_" + filename[:-8]
    sl = env.SharedLibrary(libname, fileobj)
    env.InstallAs(source = sl[0], target = "../pyobjcryst/%s"%sl[0])

# Make sure _registerconverters.so is built
sl = env.SharedLibrary( "_registerconverters.so", "registerconverters.cpp")
env.InstallAs(source = sl[0], target = "../pyobjcryst/%s"%sl[0])

